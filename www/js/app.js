class DrawBoard{
    constructor(canvas,onChange){
        this.canvas=canvas;
        this.ctx=this.canvas.getContext('2d')
        this.state=0
        this.keyBinding()
        this.drarwChange=onChange
    }
    mouseMoveHandle(e){
        this.endX=e.offsetX;
        this.endY=e.offsetY;
        //this.ctx.beginPath();

        this.drawLine()
    }
    drawLine(){
        if(this.state===1){
            this.ctx.moveTo(this.startX,this.startY);
            this.ctx.lineTo(this.endX,this.endY);
            this.ctx.stroke();
            this.drarwChange({
                moveTo:[this.startX,this.startY],
                lineTo:[this.endX,this.endY],
            })
            this.startX=this.endX
            this.startY=this.endY
        }
    }
    intoDraw(e){
        this.state=1
        this.startX=e.offsetX;
        this.startY=e.offsetY;
    }
    outDraw(){
        this.state=0
    }
    clearBoard(){
        this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)
    }
    keyBinding(){
        this.canvas.addEventListener('mousedown',this.intoDraw.bind(this))
        this.canvas.addEventListener('mousemove',this.mouseMoveHandle.bind(this))
        this.canvas.addEventListener('mouseup',this.outDraw.bind(this))
    }
    drawFromService(data){
        this.ctx.moveTo(...data.moveTo);
        this.ctx.lineTo(...data.lineTo);
        this.ctx.stroke();
    }
}
